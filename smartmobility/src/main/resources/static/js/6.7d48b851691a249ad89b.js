webpackJsonp([6],{GJyD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("SDIm"),n=a("RKAd"),l=a.n(n),o=a("uXZL"),s=a.n(o),r=[],d={components:{Buttons:i.a,VueJsonPretty:l.a},data:function(){var t=this;return{options:[{value:1,label:"1초"},{value:.1,label:"10초"},{value:.016,label:"1분"},{value:27e-5,label:"1시간"}],value:1,tableData:[{header1:"수행시작시간",data1:"",blank:"",header2:"수행종료시간",data2:""},{header1:"최대응답시간(ms)",data1:"",blank:"",header2:"최소응답시간(ms)",data2:""},{header1:"전체수행횟수",data1:"",blank:"",header2:"성공횟수",data2:"",header3:"실패횟수",data3:""}],jsonData:{},htmlData:"",resultContent:!1,buttonEvents:{refresh:{show:!0,event:function(){t.loadGrid()}},download:{show:!0,event:this.downloadExcel}},series:[],pieSeries:[0,0],chartTitle:"TPS 차트",chartOptions:{chart:{id:"chartLine",toolbar:{show:!1},zoom:{type:"x",enabled:!0,autoScaleYaxis:!0}},stroke:{width:3},markers:{size:0,strokeWidth:2},legend:{position:"top"},xaxis:{title:{text:"Minute : Second"},labels:{show:!0,formatter:function(t){var e=Math.floor(parseInt(t))-1;return r[e]}},axisBorder:{show:!1},axisTicks:{show:!1},tooltip:{enabled:!1},type:"numeric"},yaxis:{title:{text:"TPS Count"},tickAmount:4,min:0}},pieChartOptions:{title:{text:"SUCCESS/FAIL 차트",align:"center"},colors:["#00E397","#FF7979"],labels:["SUCCESS","FAIL"],legend:{position:"top"}},focusIndex:0,data:[],loading:!1,logData:[],logLoading:!1,logTotalCount:0,pageSize:10,pagePosition:"bottom",statisticArr:[]}},created:function(){this.loadGrid()},methods:{loadGrid:function(){var t=this;this.loading=!0,this.axios.get("/api/v1/statistics").then(function(e){t.loading=!1,e.data.historyList.forEach(function(t,e){t.index=e}),t.statisticArr=e.data.historyList,t.data=e.data.historyList,t.$refs.historyList.selectRow(t.data[t.focusIndex])}).catch(function(e){console.log(e),t.loading=!1})},xaxisChange:function(){var t=this.value,e=(r.length-1)*parseFloat(t);this.$refs.lineChart.updateOptions({xaxis:{min:1,max:r.length,tickAmount:e}})},historyClick:function(t){var e=this;if(this.value=1,t){this.focusIndex=t.index,this.logLoading=!0;var a=this.$loading({lock:!0,text:"Data Loading...",spinner:"el-icon-loading",target:this.$refs.container.$el,fullscreen:!1});this.axios.get("/api/v1/statistics/result",{params:{workSeq:t.workSeq}}).then(function(t){a.close();var i,n,l=t.data.resultList,o=t.data.graphList;e.logTotalCount=l.length,e.logData=l,e.logLoading=!1;var s,d=0;e.logData.forEach(function(t,a){0==a?(i=t.startDatetime,s=t.resTime):a==e.logData.length-1&&(n=t.endDatetime),d<t.resTime&&(d=t.resTime),s>t.resTime&&(s=t.resTime)}),e.tableData[0].data1=i,e.tableData[0].data2=n,e.tableData[1].data1=d,e.tableData[1].data2=s,e.tableData[2].data1=e.logTotalCount,e.tableData[2].data2=e.statisticArr[e.focusIndex].successCount,e.tableData[2].data3=e.statisticArr[e.focusIndex].failCount;var u=[],c=[],h=[],g=0,p=[];o.forEach(function(t,e,a){u.push(t.resultTime),c.push(t.countStartRequest),h.push(t.countEndRequest),g+=t.countEndRequest}),r=u,e.$refs.lineChart.updateOptions({xaxis:{min:0,max:r.length-1,tickAmount:r.length-1}}),p.push({name:"요청수",data:c}),p.push({name:"응답수",data:h}),e.$refs.lineChart.updateSeries(p),e.chartTitle="평균 TPS: "+Math.round(g/o.length)}).catch(function(t){e.logLoading=!1,a.close(),console.log(t)})}},resTimeCellCss:function(t,e){if("FAIL"==t.rstType)return{background:"#FF7979"}},dbClickResult:function(t){this.resultContent=!0;try{this.jsonData=JSON.parse(t.rstContent)}catch(e){this.jsonData=t.rstContent}},downloadExcel:function(){if(this.logLoading)this.notification("downloadExcel");else{var t=[];this.logData.forEach(function(e,a){t.push({No:a+1,"수행명":e.rstName,"수행일시":"'"+e.startDatetime,"수행종료일시":"'"+e.endDatetime,"응답시간(ms)":e.resTime,"내용":e.rstContent})});var e=s.a.utils.book_new(),a=s.a.utils.json_to_sheet(t);s.a.utils.book_append_sheet(e,a,"Sheet1"),s.a.writeFile(e,"log.csv")}}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Layout",{staticStyle:{width:"100%"}},[a("LayoutPanel",{staticStyle:{height:"45px","text-align":"right"},attrs:{region:"north",border:!1}},[a("Buttons",{attrs:{buttonEvents:t.buttonEvents}})],1),t._v(" "),a("LayoutPanel",{staticStyle:{width:"400px"},attrs:{region:"west",title:"수행기록"}},[a("DataGrid",{ref:"historyList",attrs:{data:t.data,columnResizing:!0,border:!1,loading:t.loading,selectionMode:"single"},on:{selectionChange:function(e){return t.historyClick(e)}}},[a("GridColumn",{attrs:{cellCss:"datagrid-td-rownumber",width:"30",align:"center"},scopedSlots:t._u([{key:"body",fn:function(e){return[t._v("\n                        "+t._s(e.rowIndex+1)+"\n                    ")]}}])},[a("template",{slot:"header"},[t._v("\n                        No.\n                    ")])],2),t._v(" "),a("GridColumn",{attrs:{field:"workDatetime",title:"수행일시",width:"160",align:"center",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"workName",title:"수행명",align:"left",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"rstCount",title:"수행건수",align:"center",width:"70",sortable:""}})],1)],1),t._v(" "),a("LayoutPanel",{staticStyle:{width:"100%",height:"100%"},attrs:{region:"center",border:!1}},[a("Layout",{ref:"container"},[a("LayoutPanel",{staticStyle:{width:"100%",height:"225px"},attrs:{region:"north",title:"수행결과"}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"header1",label:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data1",label:"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"blank",label:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"header2",label:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"data2",label:"[종합집계]",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"header3",label:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"data3",label:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"blank",label:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"blank",label:""}})],1)]],2),t._v(" "),a("LayoutPanel",{staticStyle:{width:"100%",height:"620px"},attrs:{region:"center"}},[a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"10px"}},[a("div",{staticStyle:{width:"100%"}},[t._v("\n                                "+t._s(t.chartTitle)+"\n                        ")]),t._v(" "),a("div",{attrs:{align:"right"}},[a("label",[t._v("단위")]),t._v("   \n                            "),a("el-select",{staticStyle:{width:"10%","margin-right":"10px"},attrs:{placeholder:"Select"},on:{change:function(e){return t.xaxisChange()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("div",{attrs:{id:"chart"}},[a("apexchart",{ref:"lineChart",attrs:{id:"lineChart",type:"line",height:"250",options:t.chartOptions,series:t.series}})],1),t._v(" "),a("DataGrid",{ref:"resultList",staticStyle:{width:"100%",height:"260px"},attrs:{data:t.logData,total:t.logTotalCount,pagination:!0,pageSize:t.pageSize,pagePosition:t.pagePosition,columnResizing:!0,border:!1},on:{rowDblClick:t.dbClickResult}},[a("GridColumn",{attrs:{cellCss:"datagrid-td-rownumber",width:"60",align:"center"},scopedSlots:t._u([{key:"body",fn:function(e){return[t._v("\n                                "+t._s(e.rowIndex+1)+"\n                            ")]}}])},[a("template",{slot:"header"},[t._v("\n                                No.\n                            ")])],2),t._v(" "),a("GridColumn",{attrs:{field:"rstName",title:"수행명",width:"150",align:"center",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"startDatetime",title:"수행일시",width:"200",align:"center",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"endDatetime",title:"수행종료일시",width:"200",align:"center",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"resTime",title:"응답시간(ms)",cellCss:t.resTimeCellCss,width:"100",align:"center",sortable:""}}),t._v(" "),a("GridColumn",{attrs:{field:"rstContent",title:"내용",halign:"center"}})],1)],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"결과 내용",visible:t.resultContent,width:"800px","custom-class":"dialog-h"},on:{"update:visible":function(e){t.resultContent=e}}},[a("vue-json-pretty",{attrs:{data:t.jsonData,showLength:!0,showDoubleQuotes:!1,showSelectController:!0,highlightMouseoverNode:!0}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(d,u,!1,function(t){a("ZJWt")},"data-v-47a8d1ef",null);e.default=c.exports},ZJWt:function(t,e){}});
//# sourceMappingURL=6.7d48b851691a249ad89b.js.map